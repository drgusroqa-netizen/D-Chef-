<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D Chef - مساعد الطبخ الذكي</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #FF6B6B;
            --secondary-color: #4ECDC4;
            --accent-color: #FFD166;
            --dark-color: #2D3047;
            --light-color: #F7FFF7;
            --gray-color: #E0E0E0;
        }
        
        body {
            background-color: #f9f9f9;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary-color), #FF8E8E);
            color: white;
            padding: 1.5rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
            color: var(--accent-color);
        }
        
        .logo h1 {
            font-size: 2rem;
            font-weight: 800;
        }
        
        .logo span {
            color: var(--accent-color);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s;
            padding: 8px 12px;
            border-radius: 5px;
        }
        
        nav a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        nav a.active {
            background-color: var(--accent-color);
            color: var(--dark-color);
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
        }
        
        /* Hero Section */
        .hero {
            padding: 4rem 0;
            background-color: var(--light-color);
            border-bottom: 1px solid var(--gray-color);
        }
        
        .hero-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: center;
        }
        
        .hero-text h2 {
            font-size: 2.8rem;
            margin-bottom: 20px;
            color: var(--dark-color);
        }
        
        .hero-text p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #555;
        }
        
        .hero-image {
            text-align: center;
        }
        
        .hero-image img {
            max-width: 100%;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        /* Main Content */
        .main-content {
            padding: 3rem 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            color: var(--dark-color);
            font-size: 2.2rem;
            position: relative;
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            width: 100px;
            height: 4px;
            background-color: var(--primary-color);
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
        }
        
        /* Input Sections */
        .input-sections {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }
        
        .input-card {
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .input-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
        }
        
        .input-card h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: var(--dark-color);
            font-size: 1.6rem;
        }
        
        .input-card h3 i {
            color: var(--primary-color);
        }
        
        .ingredients-input {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .ingredient-tag {
            background-color: var(--secondary-color);
            color: white;
            padding: 8px 15px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }
        
        .ingredient-tag button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .input-group {
            display: flex;
            margin-bottom: 20px;
        }
        
        .input-group input {
            flex-grow: 1;
            padding: 15px;
            border: 2px solid var(--gray-color);
            border-radius: 10px 0 0 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .input-group button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0 25px;
            border-radius: 0 10px 10px 0;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        .input-group button:hover {
            background-color: #ff5252;
        }
        
        /* AI Chat Interface */
        .ai-chat {
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            margin-bottom: 50px;
        }
        
        .chat-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .chat-header i {
            font-size: 2rem;
            color: var(--secondary-color);
        }
        
        .chat-header h3 {
            color: var(--dark-color);
            font-size: 1.8rem;
        }
        
        .chat-messages {
            height: 300px;
            overflow-y: auto;
            padding: 20px;
            background-color: #f5f5f5;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 12px 18px;
            border-radius: 18px;
            max-width: 80%;
            word-wrap: break-word;
        }
        
        .user-message {
            background-color: var(--secondary-color);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }
        
        .ai-message {
            background-color: white;
            color: #333;
            border: 1px solid var(--gray-color);
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }
        
        .chat-input {
            display: flex;
        }
        
        .chat-input input {
            flex-grow: 1;
            padding: 15px;
            border: 2px solid var(--gray-color);
            border-radius: 10px 0 0 10px;
            font-size: 1rem;
        }
        
        .chat-input button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 0 25px;
            border-radius: 0 10px 10px 0;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
        }
        
        /* Recipes Section */
        .recipes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .recipe-card {
            background-color: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s;
        }
        
        .recipe-card:hover {
            transform: translateY(-10px);
        }
        
        .recipe-image {
            height: 200px;
            background-size: cover;
            background-position: center;
        }
        
        .recipe-content {
            padding: 25px;
        }
        
        .recipe-title {
            font-size: 1.4rem;
            margin-bottom: 10px;
            color: var(--dark-color);
        }
        
        .recipe-ingredients {
            color: #666;
            margin-bottom: 15px;
            font-size: 0.95rem;
        }
        
        .recipe-time {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .recipe-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .recipe-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        .recipe-btn:hover {
            background-color: #ff5252;
        }
        
        .favorite-btn {
            background-color: transparent;
            border: 2px solid var(--accent-color);
            color: var(--dark-color);
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .favorite-btn:hover {
            background-color: var(--accent-color);
        }
        
        /* Footer */
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 3rem 0 1.5rem;
            margin-top: 4rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 2rem;
        }
        
        .footer-section h3 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--accent-color);
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: var(--accent-color);
        }
        
        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            font-size: 0.9rem;
        }
        
        /* Responsive Design */
        @media (max-width: 992px) {
            .hero-content {
                grid-template-columns: 1fr;
            }
            
            .hero-text h2 {
                font-size: 2.4rem;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
            }
            
            nav {
                width: 100%;
                margin-top: 20px;
                display: none;
            }
            
            nav.active {
                display: block;
            }
            
            nav ul {
                flex-direction: column;
                gap: 10px;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .input-sections {
                grid-template-columns: 1fr;
            }
            
            .hero-text h2 {
                font-size: 2rem;
            }
            
            .section-title {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-utensils"></i>
                <h1>D <span>Chef</span></h1>
            </div>
            
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            
            <nav id="mainNav">
                <ul>
                    <li><a href="#home" class="active">الرئيسية</a></li>
                    <li><a href="#recipes">الوصفات</a></li>
                    <li><a href="#favorites">المفضلة</a></li>
                    <li><a href="#about">حول الموقع</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container hero-content">
            <div class="hero-text">
                <h2>اكتشف وصفات جديدة مع مساعد الطبخ الذكي</h2>
                <p>أدخل المكونات المتوفرة في مطبخك أو اسم الطبق الذي ترغب في صنعه، وسيقوم مساعدنا الذكي باقتراح الوصفات المناسبة لك مع خطوات التحضير التفصيلية.</p>
                <div class="input-group">
                    <input type="text" id="searchRecipe" placeholder="ما الذي تريد طبخه اليوم؟">
                    <button id="searchBtn">بحث</button>
                </div>
            </div>
            <div class="hero-image">
                <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="طبخ">
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container main-content">
        <h2 class="section-title">ابدأ الطهي مع D Chef</h2>
        
        <!-- Input Sections -->
        <div class="input-sections">
            <!-- Ingredients Input -->
            <div class="input-card">
                <h3><i class="fas fa-shopping-basket"></i> المكونات المتوفرة</h3>
                <p>أدخل المكونات الموجودة في مطبخك لاقتراح الوصفات المناسبة</p>
                
                <div class="ingredients-input" id="ingredientsList">
                    <!-- Added ingredients will appear here -->
                </div>
                
                <div class="input-group">
                    <input type="text" id="ingredientInput" placeholder="أدخل المكون (مثل: طماطم، دجاج، أرز)">
                    <button id="addIngredientBtn">إضافة</button>
                </div>
                
                <button class="recipe-btn" id="findRecipesBtn" style="width: 100%;">ابحث عن وصفات</button>
            </div>
            
            <!-- Recipe Search -->
            <div class="input-card">
                <h3><i class="fas fa-search"></i> بحث عن وصفة</h3>
                <p>ابحث عن وصفة طعام محددة بالاسم أو النوع</p>
                
                <div class="input-group" style="margin-bottom: 15px;">
                    <input type="text" id="recipeNameInput" placeholder="اسم الوصفة (مثل: معكرونة بولو)">
                    <button id="searchRecipeBtn">بحث</button>
                </div>
                
                <div class="input-group">
                    <select id="recipeCategory" style="flex-grow: 1; padding: 15px; border: 2px solid var(--gray-color); border-radius: 10px; font-size: 1rem;">
                        <option value="">اختر فئة الوصفة</option>
                        <option value="main">الأطباق الرئيسية</option>
                        <option value="appetizer">المقبلات</option>
                        <option value="dessert">الحلويات</option>
                        <option value="salad">السلطات</option>
                        <option value="breakfast">وجبات الإفطار</option>
                    </select>
                    <button id="searchCategoryBtn">تصفية</button>
                </div>
            </div>
        </div>
        
        <!-- AI Chat Interface -->
        <div class="ai-chat">
            <div class="chat-header">
                <i class="fas fa-robot"></i>
                <h3>محادثة مع مساعد D Chef الذكي</h3>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="message ai-message">
                    مرحبًا! أنا مساعد D Chef الذكي. كيف يمكنني مساعدتك اليوم؟ يمكنك أن تسألني عن وصفات طعام، أو تخبرني بالمكونات المتوفرة لديك لأقترح لك وصفات مناسبة.
                </div>
            </div>
            
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="اكتب رسالتك هنا...">
                <button id="sendMessageBtn">إرسال</button>
            </div>
        </div>
        
        <!-- Recipes Section -->
        <h2 class="section-title" id="recipes">الوصفات المقترحة</h2>
        <div class="recipes-grid" id="recipesGrid">
            <!-- Recipes will be dynamically added here -->
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>D Chef</h3>
                    <p>منصة طبخ ذكية تساعدك على اكتشاف وصفات جديدة بناءً على المكونات المتوفرة لديك أو ما ترغب في طبخه.</p>
                </div>
                
                <div class="footer-section">
                    <h3>روابط سريعة</h3>
                    <ul class="footer-links">
                        <li><a href="#home">الرئيسية</a></li>
                        <li><a href="#recipes">الوصفات</a></li>
                        <li><a href="#favorites">المفضلة</a></li>
                        <li><a href="#about">حول الموقع</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>اتصل بنا</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-envelope"></i> info@dchef.com</a></li>
                        <li><a href="#"><i class="fas fa-phone"></i> +966 123 456 789</a></li>
                        <li><a href="#"><i class="fas fa-map-marker-alt"></i> الرياض، المملكة العربية السعودية</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>© 2023 D Chef. جميع الحقوق محفوظة.</p>
            </div>
        </div>
    </footer>

    <script>
        // Sample data for recipes
        const recipes = [
            {
                id: 1,
                name: "معكرونة بولو",
                category: "main",
                ingredients: ["معكرونة", "لحم مفروم", "طماطم", "بصل", "ثوم", "صلصة طماطم"],
                time: "30 دقيقة",
                difficulty: "متوسطة",
                image: "https://images.unsplash.com/photo-1563379926898-05f4575a45d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                instructions: "1. قم بسلق المعكرونة وفقاً للإرشادات على العبوة.\n2. في مقلاة، اقلي اللحم المفروم حتى ينضج.\n3. أضف البصل والثوم واقليهما حتى يصبحا طريين.\n4. أضف الطماطم وصلصة الطماطم واتركها على نار هادئة لمدة 10 دقائق.\n5. أضف المعكرونة المسلوقة إلى الصلصة واخلط جيداً.\n6. قدم الطبق ساخناً."
            },
            {
                id: 2,
                name: "سلطة التونة",
                category: "salad",
                ingredients: ["تونة معلبة", "خس", "طماطم", "خيار", "زيتون", "ليمون"],
                time: "15 دقيقة",
                difficulty: "سهلة",
                image: "https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                instructions: "1. اغسل الخس والطماطم والخيار جيداً.\n2. قطع الخس والطماطم والخيار إلى قطع صغيرة.\n3. ضع الخضار المقطعة في وعاء السلطة.\n4. أضف التونة المصفاة من الزيت.\n5. أضف الزيتون وعصير الليمون.\n6. قلب المكونات جيداً وتقدم مباشرة."
            },
            {
                id: 3,
                name: "كب كيك الشوكولاتة",
                category: "dessert",
                ingredients: ["طحين", "سكر", "بيض", "شوكولاتة", "زبدة", "بيكنج باودر"],
                time: "45 دقيقة",
                difficulty: "متوسطة",
                image: "https://images.unsplash.com/photo-1571115764595-644a1f56a55c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                instructions: "1. سخن الفرن على 180 درجة مئوية.\n2. اخلط الطحين والبيكنج باودر في وعاء.\n3. في وعاء آخر، اخفق الزبدة والسكر حتى يصبح الخليط كريمي.\n4. أضف البيض واحداً تلو الآخر مع الاستمرار في الخفق.\n5. أضف خليط الطحين والشوكولاتة المذابة.\n6. ضع الخليط في قوالب الكب كيك واخبز لمدة 20-25 دقيقة."
            },
            {
                id: 4,
                name: "أومليت الجبن",
                category: "breakfast",
                ingredients: ["بيض", "جبن", "فلفل حلو", "بصل", "ملح", "فلفل أسود"],
                time: "10 دقيقة",
                difficulty: "سهلة",
                image: "https://images.unsplash.com/photo-1490818387583-1baba5e638af?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                instructions: "1. اخفق البيض في وعاء مع قليل من الملح والفلفل.\n2. قطع البصل والفلفل الحلو إلى قطع صغيرة.\n3. اقلي البصل والفلفل في مقلاة مع قليل من الزيت حتى يصبحا طريين.\n4. صب خليط البيض على الخضار في المقلاة.\n5. أضف الجبن المفروم على الوجه.\n6. اقلب الأومليت عندما ينضج من الأسفل واطهيه من الجانب الآخر."
            }
        ];

        // User's ingredients
        let userIngredients = [];

        // DOM Elements
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mainNav = document.getElementById('mainNav');
        const ingredientInput = document.getElementById('ingredientInput');
        const addIngredientBtn = document.getElementById('addIngredientBtn');
        const ingredientsList = document.getElementById('ingredientsList');
        const findRecipesBtn = document.getElementById('findRecipesBtn');
        const recipeNameInput = document.getElementById('recipeNameInput');
        const searchRecipeBtn = document.getElementById('searchRecipeBtn');
        const recipeCategory = document.getElementById('recipeCategory');
        const searchCategoryBtn = document.getElementById('searchCategoryBtn');
        const chatInput = document.getElementById('chatInput');
        const sendMessageBtn = document.getElementById('sendMessageBtn');
        const chatMessages = document.getElementById('chatMessages');
        const recipesGrid = document.getElementById('recipesGrid');
        const searchRecipe = document.getElementById('searchRecipe');
        const searchBtn = document.getElementById('searchBtn');

        // Initialize the app
        function initApp() {
            displayRecipes(recipes);
            setupEventListeners();
        }

        // Set up event listeners
        function setupEventListeners() {
            // Mobile menu toggle
            mobileMenuBtn.addEventListener('click', () => {
                mainNav.classList.toggle('active');
            });

            // Add ingredient
            addIngredientBtn.addEventListener('click', addIngredient);
            ingredientInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addIngredient();
            });

            // Find recipes by ingredients
            findRecipesBtn.addEventListener('click', findRecipesByIngredients);

            // Search recipe by name
            searchRecipeBtn.addEventListener('click', searchRecipeByName);

            // Search by category
            searchCategoryBtn.addEventListener('click', searchByCategory);

            // Chat functionality
            sendMessageBtn.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessage();
            });

            // Search from hero section
            searchBtn.addEventListener('click', () => {
                const query = searchRecipe.value.trim();
                if (query) {
                    searchRecipeByNameFromQuery(query);
                }
            });
        }

        // Add ingredient to the list
        function addIngredient() {
            const ingredient = ingredientInput.value.trim();
            if (ingredient && !userIngredients.includes(ingredient)) {
                userIngredients.push(ingredient);
                renderIngredientsList();
                ingredientInput.value = '';
                
                // Add to chat as user message
                addMessageToChat(`لدي ${ingredient}`, 'user');
                setTimeout(() => {
                    addMessageToChat(`تمت إضافة ${ingredient} إلى قائمة المكونات الخاصة بك. يمكنك إضافة مكونات أخرى أو البحث عن وصفات باستخدام المكونات المضافة.`, 'ai');
                }, 500);
            }
        }

        // Render ingredients list
        function renderIngredientsList() {
            ingredientsList.innerHTML = '';
            userIngredients.forEach(ingredient => {
                const tag = document.createElement('div');
                tag.className = 'ingredient-tag';
                tag.innerHTML = `
                    ${ingredient}
                    <button class="remove-ingredient" data-ingredient="${ingredient}">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                ingredientsList.appendChild(tag);
            });

            // Add event listeners to remove buttons
            document.querySelectorAll('.remove-ingredient').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const ingredientToRemove = e.target.closest('button').dataset.ingredient;
                    userIngredients = userIngredients.filter(ing => ing !== ingredientToRemove);
                    renderIngredientsList();
                });
            });
        }

        // Find recipes by ingredients
        function findRecipesByIngredients() {
            if (userIngredients.length === 0) {
                alert('يرجى إضافة مكونات أولاً');
                return;
            }

            const matchedRecipes = recipes.filter(recipe => {
                return userIngredients.some(ingredient => 
                    recipe.ingredients.some(recipeIng => 
                        recipeIng.toLowerCase().includes(ingredient.toLowerCase())
                    )
                );
            });

            if (matchedRecipes.length === 0) {
                addMessageToChat(`لقد بحثت عن وصفات تحتوي على: ${userIngredients.join(', ')}. لم أجد وصفات مطابقة تماماً، لكنني سأعرض لك بعض الوصفات المقترحة.`, 'ai');
                displayRecipes(recipes.slice(0, 2));
            } else {
                addMessageToChat(`لقد بحثت عن وصفات تحتوي على: ${userIngredients.join(', ')}. وجدت ${matchedRecipes.length} وصفة مناسبة.`, 'ai');
                displayRecipes(matchedRecipes);
            }
        }

        // Search recipe by name
        function searchRecipeByName() {
            const query = recipeNameInput.value.trim();
            if (!query) return;
            
            searchRecipeByNameFromQuery(query);
        }

        // Search recipe by name from query
        function searchRecipeByNameFromQuery(query) {
            const matchedRecipes = recipes.filter(recipe => 
                recipe.name.toLowerCase().includes(query.toLowerCase())
            );

            if (matchedRecipes.length === 0) {
                addMessageToChat(`لم أجد وصفات تحتوي على "${query}". جرب البحث بكلمات مختلفة أو استخدم ميزة البحث بالمكونات.`, 'ai');
            } else {
                addMessageToChat(`وجدت ${matchedRecipes.length} وصفة تحتوي على "${query}".`, 'ai');
                displayRecipes(matchedRecipes);
            }
        }

        // Search by category
        function searchByCategory() {
            const category = recipeCategory.value;
            if (!category) return;
            
            const categoryNames = {
                'main': 'الأطباق الرئيسية',
                'appetizer': 'المقبلات',
                'dessert': 'الحلويات',
                'salad': 'السلطات',
                'breakfast': 'وجبات الإفطار'
            };
            
            const matchedRecipes = recipes.filter(recipe => recipe.category === category);
            
            if (matchedRecipes.length === 0) {
                addMessageToChat(`لم أجد وصفات في فئة "${categoryNames[category]}".`, 'ai');
            } else {
                addMessageToChat(`وجدت ${matchedRecipes.length} وصفة في فئة "${categoryNames[category]}".`, 'ai');
                displayRecipes(matchedRecipes);
            }
        }

        // Send message in chat
        function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;
            
            addMessageToChat(message, 'user');
            chatInput.value = '';
            
            // Simulate AI response after a short delay
            setTimeout(() => {
                generateAIResponse(message);
            }, 1000);
        }

        // Generate AI response
        function generateAIResponse(userMessage) {
            let response = '';
            
            if (userMessage.includes('مرحبا') || userMessage.includes('اهلا') || userMessage.includes('hello')) {
                response = 'مرحباً بك! أنا مساعد D Chef الذكي. كيف يمكنني مساعدتك في الطبخ اليوم؟';
            } else if (userMessage.includes('وصفة') || userMessage.includes('اطبخ') || userMessage.includes('طبخ')) {
                response = 'يمكنني مساعدتك في العثور على وصفات. أخبرني بالمكونات المتوفرة لديك أو اسم الطبق الذي ترغب في صنعه.';
            } else if (userMessage.includes('شكرا') || userMessage.includes('thanks')) {
                response = 'العفو! سعيد بأن أكون في خدمتك. إذا كان لديك أي استفسارات أخرى عن الطبخ، فلا تتردد في السؤال.';
            } else if (userMessage.includes('مكونات') || userMessage.includes('لدي')) {
                response = 'يمكنك إضافة المكونات المتوفرة لديك في قسم "المكونات المتوفرة" وسأقوم باقتراح وصفات مناسبة لك.';
            } else {
                response = 'أنا هنا لمساعدتك في العثور على وصفات طبخ مناسبة. يمكنك إخباري بالمكونات المتوفرة لديك، أو البحث عن وصفة معينة بالاسم، أو تصفية الوصفات حسب الفئة.';
            }
            
            addMessageToChat(response, 'ai');
        }

        // Add message to chat
        function addMessageToChat(message, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            messageDiv.textContent = message;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Display recipes in the grid
        function displayRecipes(recipesToDisplay) {
            recipesGrid.innerHTML = '';
            
            recipesToDisplay.forEach(recipe => {
                const recipeCard = document.createElement('div');
                recipeCard.className = 'recipe-card';
                recipeCard.innerHTML = `
                    <div class="recipe-image" style="background-image: url('${recipe.image}')"></div>
                    <div class="recipe-content">
                        <h3 class="recipe-title">${recipe.name}</h3>
                        <p class="recipe-ingredients"><strong>المكونات:</strong> ${recipe.ingredients.join(', ')}</p>
                        <div class="recipe-time">
                            <i class="far fa-clock"></i>
                            <span>${recipe.time}</span>
                            <span style="margin-right: auto;">${recipe.difficulty}</span>
                        </div>
                        <div class="recipe-actions">
                            <button class="recipe-btn view-recipe" data-id="${recipe.id}">عرض الوصفة</button>
                            <button class="favorite-btn"><i class="far fa-heart"></i> مفضلة</button>
                        </div>
                    </div>
                `;
                recipesGrid.appendChild(recipeCard);
            });

            // Add event listeners to view recipe buttons
            document.querySelectorAll('.view-recipe').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const recipeId = parseInt(e.target.dataset.id);
                    viewRecipeDetails(recipeId);
                });
            });

            // Add event listeners to favorite buttons
            document.querySelectorAll('.favorite-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const heartIcon = e.target.querySelector('i') || e.target;
                    if (heartIcon.classList.contains('far')) {
                        heartIcon.classList.remove('far');
                        heartIcon.classList.add('fas');
                        e.target.innerHTML = '<i class="fas fa-heart"></i> في المفضلة';
                        addMessageToChat('تمت إضافة الوصفة إلى المفضلة.', 'ai');
                    } else {
                        heartIcon.classList.remove('fas');
                        heartIcon.classList.add('far');
                        e.target.innerHTML = '<i class="far fa-heart"></i> مفضلة';
                        addMessageToChat('تمت إزالة الوصفة من المفضلة.', 'ai');
                    }
                });
            });
        }

        // View recipe details
        function viewRecipeDetails(recipeId) {
            const recipe = recipes.find(r => r.id === recipeId);
            if (!recipe) return;
            
            // Create modal for recipe details
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0,0,0,0.7);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
                padding: 20px;
            `;
            
            modal.innerHTML = `
                <div style="background-color: white; border-radius: 15px; max-width: 700px; width: 100%; max-height: 90vh; overflow-y: auto;">
                    <div style="position: relative;">
                        <div style="height: 300px; background-image: url('${recipe.image}'); background-size: cover; background-position: center; border-radius: 15px 15px 0 0;"></div>
                        <button class="close-modal" style="position: absolute; top: 15px; left: 15px; background-color: white; border: none; width: 40px; height: 40px; border-radius: 50%; font-size: 1.5rem; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.2);">×</button>
                    </div>
                    <div style="padding: 30px;">
                        <h2 style="color: var(--dark-color); margin-bottom: 15px;">${recipe.name}</h2>
                        <div style="display: flex; gap: 20px; margin-bottom: 25px; color: #666;">
                            <div><i class="far fa-clock"></i> ${recipe.time}</div>
                            <div>${recipe.difficulty}</div>
                        </div>
                        <div style="margin-bottom: 25px;">
                            <h3 style="color: var(--dark-color); margin-bottom: 10px;">المكونات:</h3>
                            <p>${recipe.ingredients.join(', ')}</p>
                        </div>
                        <div>
                            <h3 style="color: var(--dark-color); margin-bottom: 10px;">طريقة التحضير:</h3>
                            <p style="white-space: pre-line;">${recipe.instructions}</p>
                        </div>
                        <div style="margin-top: 30px; text-align: center;">
                            <button class="recipe-btn" id="closeModalBtn" style="padding: 12px 30px;">إغلاق</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Close modal events
            modal.querySelector('.close-modal').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            modal.querySelector('#closeModalBtn').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
        }

        // Initialize the app when page loads
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
